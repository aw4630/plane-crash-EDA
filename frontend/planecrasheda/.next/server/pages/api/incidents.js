"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/incidents";
exports.ids = ["pages/api/incidents"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "@vercel/postgres":
/*!***********************************!*\
  !*** external "@vercel/postgres" ***!
  \***********************************/
/***/ ((module) => {

module.exports = import("@vercel/postgres");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fincidents&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fincidents.js&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fincidents&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fincidents.js&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_incidents_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/incidents.js */ \"(api)/./pages/api/incidents.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_incidents_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_incidents_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_incidents_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_incidents_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/incidents\",\n        pathname: \"/api/incidents\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_incidents_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmluY2lkZW50cyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGaW5jaWRlbnRzLmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ3FEO0FBQ3JEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxvREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsb0RBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGxhbmVjcmFzaGVkYS8/OTNlMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL2luY2lkZW50cy5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2luY2lkZW50c1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2luY2lkZW50c1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fincidents&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fincidents.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/incidents.js":
/*!********************************!*\
  !*** ./pages/api/incidents.js ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vercel/postgres */ \"@vercel/postgres\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_vercel_postgres__WEBPACK_IMPORTED_MODULE_0__]);\n_vercel_postgres__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nasync function handler(req, res) {\n    const { sort = \"date-desc\", keyword, type, ownerOperator, location, phase, nature, departure, destination, primaryCause } = req.query;\n    const client = (0,_vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.createClient)(); // Create the database client\n    try {\n        await client.connect(); // Connect to the database\n        let query = \"SELECT DISTINCT * FROM database\";\n        const searchConditions = [];\n        const queryParams = [];\n        // Sorting logic\n        let sortQuery;\n        switch(sort){\n            case \"date-asc\":\n                sortQuery = 'ORDER BY \"Date\" ASC';\n                break;\n            case \"fatalities-desc\":\n                sortQuery = 'ORDER BY \"Fatalities\" DESC';\n                break;\n            case \"fatalities-asc\":\n                sortQuery = 'ORDER BY \"Fatalities\" ASC';\n                break;\n            default:\n                sortQuery = 'ORDER BY \"Date\" DESC'; // Default sorting\n        }\n        // Filtering logic (each condition gets added to `searchConditions`)\n        if (keyword) {\n            searchConditions.push(`LOWER(\"Narrative\") LIKE LOWER($${queryParams.length + 1})`);\n            queryParams.push(`%${keyword}%`);\n        }\n        if (type) {\n            searchConditions.push(`LOWER(\"Type\") LIKE LOWER($${queryParams.length + 1})`);\n            queryParams.push(`%${type}%`);\n        }\n        if (ownerOperator) {\n            searchConditions.push(`LOWER(\"Owner/operator\") LIKE LOWER($${queryParams.length + 1})`);\n            queryParams.push(`%${ownerOperator}%`);\n        }\n        if (location) {\n            searchConditions.push(`LOWER(\"Location\") LIKE LOWER($${queryParams.length + 1})`);\n            queryParams.push(`%${location}%`);\n        }\n        if (phase) {\n            searchConditions.push(`LOWER(\"Phase\") LIKE LOWER($${queryParams.length + 1})`);\n            queryParams.push(`%${phase}%`);\n        }\n        if (nature) {\n            searchConditions.push(`LOWER(\"Nature\") LIKE LOWER($${queryParams.length + 1})`);\n            queryParams.push(`%${nature}%`);\n        }\n        if (departure) {\n            searchConditions.push(`LOWER(\"Departure airport\") LIKE LOWER($${queryParams.length + 1})`);\n            queryParams.push(`%${departure}%`);\n        }\n        if (destination) {\n            searchConditions.push(`LOWER(\"Destination airport\") LIKE LOWER($${queryParams.length + 1})`);\n            queryParams.push(`%${destination}%`);\n        }\n        if (primaryCause) {\n            searchConditions.push(`\"Primary cause\" = $${queryParams.length + 1}`);\n            queryParams.push(primaryCause);\n        }\n        if (searchConditions.length > 0) {\n            query += \" WHERE \" + searchConditions.join(\" AND \");\n        }\n        query += ` ${sortQuery}`; // Add the ORDER BY clause\n        // Execute the query\n        const { rows } = await client.query(query, queryParams);\n        res.status(200).json(rows); // Return all rows\n    } catch (error) {\n        console.error(\"Error querying incidents:\", error); // Detailed logging\n        res.status(500).json({\n            error: \"Error querying incidents\",\n            details: error.message // Include error details in the response\n        });\n    } finally{\n        await client.end(); // Close the connection\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJLENBQUMsQ0FBQyxtQkFBbUIsRUFBRUYsWUFBWUcsTUFBTSxHQUFHLEVBQUUsQ0FBQztZQUNwRUgsWUFBWUUsSUFBSSxDQUFDUDtRQUNuQjtRQUVBLElBQUlJLGlCQUFpQkksTUFBTSxHQUFHLEdBQUc7WUFDL0JQLFNBQVMsWUFBWUcsaUJBQWlCSyxJQUFJLENBQUM7UUFDN0M7UUFFQVIsU0FBUyxDQUFDLENBQUMsRUFBRUssVUFBVSxDQUFDLEVBQUcsMEJBQTBCO1FBRXJELG9CQUFvQjtRQUNwQixNQUFNLEVBQUVJLElBQUksRUFBRSxHQUFHLE1BQU1SLE9BQU9ELEtBQUssQ0FBQ0EsT0FBT0k7UUFFM0NmLElBQUlxQixNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDRixPQUFRLGtCQUFrQjtJQUNqRCxFQUFFLE9BQU9HLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLDZCQUE2QkEsUUFBUyxtQkFBbUI7UUFDdkV2QixJQUFJcUIsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUNuQkMsT0FBTztZQUNQRSxTQUFTRixNQUFNRyxPQUFPLENBQUUsd0NBQXdDO1FBQ2xFO0lBQ0YsU0FBVTtRQUNSLE1BQU1kLE9BQU9lLEdBQUcsSUFBSyx1QkFBdUI7SUFDOUM7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsYW5lY3Jhc2hlZGEvLi9wYWdlcy9hcGkvaW5jaWRlbnRzLmpzP2UyZGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHZlcmNlbC9wb3N0Z3Jlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgY29uc3Qge1xuICAgIHNvcnQgPSAnZGF0ZS1kZXNjJyxcbiAgICBrZXl3b3JkLFxuICAgIHR5cGUsXG4gICAgb3duZXJPcGVyYXRvcixcbiAgICBsb2NhdGlvbixcbiAgICBwaGFzZSxcbiAgICBuYXR1cmUsXG4gICAgZGVwYXJ0dXJlLFxuICAgIGRlc3RpbmF0aW9uLFxuICAgIHByaW1hcnlDYXVzZVxuICB9ID0gcmVxLnF1ZXJ5O1xuXG4gIGNvbnN0IGNsaWVudCA9IGNyZWF0ZUNsaWVudCgpOyAgLy8gQ3JlYXRlIHRoZSBkYXRhYmFzZSBjbGllbnRcblxuICB0cnkge1xuICAgIGF3YWl0IGNsaWVudC5jb25uZWN0KCk7ICAvLyBDb25uZWN0IHRvIHRoZSBkYXRhYmFzZVxuXG4gICAgbGV0IHF1ZXJ5ID0gJ1NFTEVDVCBESVNUSU5DVCAqIEZST00gZGF0YWJhc2UnO1xuICAgIGNvbnN0IHNlYXJjaENvbmRpdGlvbnMgPSBbXTtcbiAgICBjb25zdCBxdWVyeVBhcmFtcyA9IFtdO1xuXG4gICAgLy8gU29ydGluZyBsb2dpY1xuICAgIGxldCBzb3J0UXVlcnk7XG4gICAgc3dpdGNoIChzb3J0KSB7XG4gICAgICBjYXNlICdkYXRlLWFzYyc6XG4gICAgICAgIHNvcnRRdWVyeSA9ICdPUkRFUiBCWSBcIkRhdGVcIiBBU0MnO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2ZhdGFsaXRpZXMtZGVzYyc6XG4gICAgICAgIHNvcnRRdWVyeSA9ICdPUkRFUiBCWSBcIkZhdGFsaXRpZXNcIiBERVNDJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdmYXRhbGl0aWVzLWFzYyc6XG4gICAgICAgIHNvcnRRdWVyeSA9ICdPUkRFUiBCWSBcIkZhdGFsaXRpZXNcIiBBU0MnO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHNvcnRRdWVyeSA9ICdPUkRFUiBCWSBcIkRhdGVcIiBERVNDJzsgIC8vIERlZmF1bHQgc29ydGluZ1xuICAgIH1cblxuICAgIC8vIEZpbHRlcmluZyBsb2dpYyAoZWFjaCBjb25kaXRpb24gZ2V0cyBhZGRlZCB0byBgc2VhcmNoQ29uZGl0aW9uc2ApXG4gICAgaWYgKGtleXdvcmQpIHtcbiAgICAgIHNlYXJjaENvbmRpdGlvbnMucHVzaChgTE9XRVIoXCJOYXJyYXRpdmVcIikgTElLRSBMT1dFUigkJHtxdWVyeVBhcmFtcy5sZW5ndGggKyAxfSlgKTtcbiAgICAgIHF1ZXJ5UGFyYW1zLnB1c2goYCUke2tleXdvcmR9JWApO1xuICAgIH1cbiAgICBpZiAodHlwZSkge1xuICAgICAgc2VhcmNoQ29uZGl0aW9ucy5wdXNoKGBMT1dFUihcIlR5cGVcIikgTElLRSBMT1dFUigkJHtxdWVyeVBhcmFtcy5sZW5ndGggKyAxfSlgKTtcbiAgICAgIHF1ZXJ5UGFyYW1zLnB1c2goYCUke3R5cGV9JWApO1xuICAgIH1cbiAgICBpZiAob3duZXJPcGVyYXRvcikge1xuICAgICAgc2VhcmNoQ29uZGl0aW9ucy5wdXNoKGBMT1dFUihcIk93bmVyL29wZXJhdG9yXCIpIExJS0UgTE9XRVIoJCR7cXVlcnlQYXJhbXMubGVuZ3RoICsgMX0pYCk7XG4gICAgICBxdWVyeVBhcmFtcy5wdXNoKGAlJHtvd25lck9wZXJhdG9yfSVgKTtcbiAgICB9XG4gICAgaWYgKGxvY2F0aW9uKSB7XG4gICAgICBzZWFyY2hDb25kaXRpb25zLnB1c2goYExPV0VSKFwiTG9jYXRpb25cIikgTElLRSBMT1dFUigkJHtxdWVyeVBhcmFtcy5sZW5ndGggKyAxfSlgKTtcbiAgICAgIHF1ZXJ5UGFyYW1zLnB1c2goYCUke2xvY2F0aW9ufSVgKTtcbiAgICB9XG4gICAgaWYgKHBoYXNlKSB7XG4gICAgICBzZWFyY2hDb25kaXRpb25zLnB1c2goYExPV0VSKFwiUGhhc2VcIikgTElLRSBMT1dFUigkJHtxdWVyeVBhcmFtcy5sZW5ndGggKyAxfSlgKTtcbiAgICAgIHF1ZXJ5UGFyYW1zLnB1c2goYCUke3BoYXNlfSVgKTtcbiAgICB9XG4gICAgaWYgKG5hdHVyZSkge1xuICAgICAgc2VhcmNoQ29uZGl0aW9ucy5wdXNoKGBMT1dFUihcIk5hdHVyZVwiKSBMSUtFIExPV0VSKCQke3F1ZXJ5UGFyYW1zLmxlbmd0aCArIDF9KWApO1xuICAgICAgcXVlcnlQYXJhbXMucHVzaChgJSR7bmF0dXJlfSVgKTtcbiAgICB9XG4gICAgaWYgKGRlcGFydHVyZSkge1xuICAgICAgc2VhcmNoQ29uZGl0aW9ucy5wdXNoKGBMT1dFUihcIkRlcGFydHVyZSBhaXJwb3J0XCIpIExJS0UgTE9XRVIoJCR7cXVlcnlQYXJhbXMubGVuZ3RoICsgMX0pYCk7XG4gICAgICBxdWVyeVBhcmFtcy5wdXNoKGAlJHtkZXBhcnR1cmV9JWApO1xuICAgIH1cbiAgICBpZiAoZGVzdGluYXRpb24pIHtcbiAgICAgIHNlYXJjaENvbmRpdGlvbnMucHVzaChgTE9XRVIoXCJEZXN0aW5hdGlvbiBhaXJwb3J0XCIpIExJS0UgTE9XRVIoJCR7cXVlcnlQYXJhbXMubGVuZ3RoICsgMX0pYCk7XG4gICAgICBxdWVyeVBhcmFtcy5wdXNoKGAlJHtkZXN0aW5hdGlvbn0lYCk7XG4gICAgfVxuICAgIGlmIChwcmltYXJ5Q2F1c2UpIHtcbiAgICAgIHNlYXJjaENvbmRpdGlvbnMucHVzaChgXCJQcmltYXJ5IGNhdXNlXCIgPSAkJHtxdWVyeVBhcmFtcy5sZW5ndGggKyAxfWApO1xuICAgICAgcXVlcnlQYXJhbXMucHVzaChwcmltYXJ5Q2F1c2UpO1xuICAgIH1cblxuICAgIGlmIChzZWFyY2hDb25kaXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIHF1ZXJ5ICs9ICcgV0hFUkUgJyArIHNlYXJjaENvbmRpdGlvbnMuam9pbignIEFORCAnKTtcbiAgICB9XG5cbiAgICBxdWVyeSArPSBgICR7c29ydFF1ZXJ5fWA7ICAvLyBBZGQgdGhlIE9SREVSIEJZIGNsYXVzZVxuXG4gICAgLy8gRXhlY3V0ZSB0aGUgcXVlcnlcbiAgICBjb25zdCB7IHJvd3MgfSA9IGF3YWl0IGNsaWVudC5xdWVyeShxdWVyeSwgcXVlcnlQYXJhbXMpO1xuICAgIFxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHJvd3MpOyAgLy8gUmV0dXJuIGFsbCByb3dzXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcXVlcnlpbmcgaW5jaWRlbnRzOicsIGVycm9yKTsgIC8vIERldGFpbGVkIGxvZ2dpbmdcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogJ0Vycm9yIHF1ZXJ5aW5nIGluY2lkZW50cycsXG4gICAgICBkZXRhaWxzOiBlcnJvci5tZXNzYWdlICAvLyBJbmNsdWRlIGVycm9yIGRldGFpbHMgaW4gdGhlIHJlc3BvbnNlXG4gICAgfSk7XG4gIH0gZmluYWxseSB7XG4gICAgYXdhaXQgY2xpZW50LmVuZCgpOyAgLy8gQ2xvc2UgdGhlIGNvbm5lY3Rpb25cbiAgfVxufVxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJzb3J0Iiwia2V5d29yZCIsInR5cGUiLCJvd25lck9wZXJhdG9yIiwibG9jYXRpb24iLCJwaGFzZSIsIm5hdHVyZSIsImRlcGFydHVyZSIsImRlc3RpbmF0aW9uIiwicHJpbWFyeUNhdXNlIiwicXVlcnkiLCJjbGllbnQiLCJjb25uZWN0Iiwic2VhcmNoQ29uZGl0aW9ucyIsInF1ZXJ5UGFyYW1zIiwic29ydFF1ZXJ5IiwicHVzaCIsImxlbmd0aCIsImpvaW4iLCJyb3dzIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiY29uc29sZSIsImRldGFpbHMiLCJtZXNzYWdlIiwiZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/incidents.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fincidents&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fincidents.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();